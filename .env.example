# Backend Environment Configuration

# =============================================================================
# Server Configuration
# =============================================================================
PORT=5000
FRONTEND_URL=http://localhost:3000

# =============================================================================
# Development Mode Configuration
# =============================================================================
# DEV_MODE=true:  Enables environment switching (pilot/prod) for local development
#                 Load separate environment variables with _PILOT and _PROD suffixes
#                 Frontend shows environment selector checkbox
#
# DEV_MODE=false: Single environment deployment (production mode)
#                 Load generic environment variables (no suffix)
#                 Container config sets the correct environment
# =============================================================================
DEV_MODE=true

# =============================================================================
# AWS Configuration
# =============================================================================
# Region for all AWS services
AWS_REGION=us-east-1

# Optional: Only needed for local development
# In Kubernetes, IRSA (IAM Roles for Service Accounts) handles authentication
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# =============================================================================
# RTCStats DynamoDB Configuration (Recommended)
# =============================================================================
# Uses IAM authentication via IRSA in Kubernetes - no passwords needed
# Set to 'true' to use DynamoDB for metadata queries (like rtc-visualizer)
RTCSTATS_USE_DYNAMODB=true

# --- DEV_MODE=true: Environment-specific tables ---
# Separate DynamoDB tables for pilot and production environments
RTCSTATS_DYNAMODB_TABLE_PILOT=
RTCSTATS_DYNAMODB_TABLE_PROD=

# --- DEV_MODE=false: Generic table (deployment determines environment) ---
# RTCSTATS_DYNAMODB_TABLE=

# =============================================================================
# RTCStats S3 Configuration
# =============================================================================
# S3 buckets for storing RTCStats dump files

# --- DEV_MODE=true: Environment-specific buckets ---
# Separate S3 buckets for pilot and production environments
RTCSTATS_S3_BUCKET_PILOT=
RTCSTATS_S3_BUCKET_PROD=

# --- DEV_MODE=false: Generic bucket (deployment determines environment) ---
# RTCSTATS_S3_BUCKET=

# Optional: Custom S3 endpoint (for testing with LocalStack, Minio, etc.)
# RTCSTATS_S3_ENDPOINT=

# =============================================================================
# RTCStats Redshift Configuration (Optional)
# =============================================================================
# Only needed if RTCSTATS_USE_DYNAMODB=false
# Uses Redshift Data API with IAM authentication (no passwords needed)

# --- DEV_MODE=true: Environment-specific clusters ---
# Separate Redshift clusters for pilot and production environments
RTCSTATS_REDSHIFT_CLUSTER_ID_PILOT=
RTCSTATS_REDSHIFT_DATABASE_PILOT=rtcstats
RTCSTATS_REDSHIFT_WORKGROUP_PILOT=

RTCSTATS_REDSHIFT_CLUSTER_ID_PROD=
RTCSTATS_REDSHIFT_DATABASE_PROD=rtcstats
RTCSTATS_REDSHIFT_WORKGROUP_PROD=

# --- DEV_MODE=false: Generic cluster (deployment determines environment) ---
# RTCSTATS_REDSHIFT_CLUSTER_ID=
# RTCSTATS_REDSHIFT_DATABASE=rtcstats
# RTCSTATS_REDSHIFT_WORKGROUP=

# =============================================================================
# RTCStats General Configuration
# =============================================================================
# Path for temporary dump file downloads
RTCSTATS_DOWNLOADS_PATH=./rtcstats-downloads

# Maximum concurrent dump downloads
RTCSTATS_MAX_DOWNLOADS=3

# Download timeout in milliseconds (default: 10 minutes)
RTCSTATS_TIMEOUT=600000

# Cleanup downloaded files after N days
RTCSTATS_CLEANUP_DAYS=7

# Retry configuration for failed operations
RTCSTATS_RETRY_ATTEMPTS=3
RTCSTATS_RETRY_DELAY=5000

# =============================================================================
# Logging Configuration
# =============================================================================
# LOG_LEVEL options: trace, debug, info, warn, error
# Default is 'info' - set to 'debug' to see verbose output
LOG_LEVEL=info

# =============================================================================
# Example Configurations
# =============================================================================

# Example 1: Local Development with DynamoDB (DEV_MODE=true)
# ------------------------------------------------------------
# DEV_MODE=true
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key
# RTCSTATS_USE_DYNAMODB=true
# RTCSTATS_DYNAMODB_TABLE_PILOT=pilotRtcstatsMeta
# RTCSTATS_DYNAMODB_TABLE_PROD=prodRtcstatsMeta
# RTCSTATS_S3_BUCKET_PILOT=jitsi-pilot-rtcstats-server
# RTCSTATS_S3_BUCKET_PROD=jitsi-prod-rtcstats-server

# Example 2: Production Deployment - Pilot Environment (DEV_MODE=false)
# ----------------------------------------------------------------------
# DEV_MODE=false
# AWS_REGION=us-east-1
# RTCSTATS_USE_DYNAMODB=true
# RTCSTATS_DYNAMODB_TABLE=pilotRtcstatsMeta
# RTCSTATS_S3_BUCKET=jitsi-pilot-rtcstats-server

# Example 3: Production Deployment - Prod Environment (DEV_MODE=false)
# ---------------------------------------------------------------------
# DEV_MODE=false
# AWS_REGION=us-east-1
# RTCSTATS_USE_DYNAMODB=true
# RTCSTATS_DYNAMODB_TABLE=prodRtcstatsMeta
# RTCSTATS_S3_BUCKET=jitsi-prod-rtcstats-server

# Example 4: Using Redshift instead of DynamoDB (DEV_MODE=false)
# ---------------------------------------------------------------
# DEV_MODE=false
# AWS_REGION=us-east-1
# RTCSTATS_USE_DYNAMODB=false
# RTCSTATS_REDSHIFT_CLUSTER_ID=prod-rtcstats-cluster
# RTCSTATS_REDSHIFT_DATABASE=rtcstats
# RTCSTATS_S3_BUCKET=jitsi-prod-rtcstats-server
